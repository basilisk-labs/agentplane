---
title: "Configuration"
description: "How .agentplane/config.json works and how to change it safely."
---

## Overview

Agent Plane reads `.agentplane/config.json` and validates it against the config schema.

Use CLI commands to read and update values safely:

```bash
agentplane config show
agentplane config set workflow_mode branch_pr
```

## High-impact keys

### workflow_mode

- `direct`: single checkout workflow.
- `branch_pr`: per-task branches and PR artifacts.

### status_commit_policy

- `off`: do not gate status/comment-driven commits.
- `warn`: allow, but warn when no explicit confirmation.
- `confirm`: require explicit confirmation.

### finish_auto_status_commit

- `false` by default.
- `init` sets it to `true` for `branch_pr`, `false` for `direct`.

### agents.approvals

- `require_plan`
- `require_network`
- `require_verify`
- `require_force`

These keys control approval gates; they do not add or remove CLI capabilities.

### paths

- `paths.agents_dir`
- `paths.workflow_dir`
- `paths.worktrees_dir`
- `paths.tasks_path` (export-only snapshot path)

### tasks.tags (primary tag model)

- `tasks.tags.primary_allowlist`
- `tasks.tags.strict_primary`
- `tasks.tags.fallback_primary`
- `tasks.tags.lock_primary_on_update`

Task policy resolves exactly one primary tag per task. Secondary tags remain free-form.

### tasks.verify

- `tasks.verify.require_steps_for_primary`
- `tasks.verify.require_verification_for_primary`
- `tasks.verify.spike_tag`
- `tasks.verify.enforce_on_plan_approve`
- `tasks.verify.enforce_on_start_when_no_plan`

Compatibility note: `tasks.verify.required_tags` still exists in schema and may be present in older configs.
Current enforcement should be documented and configured through primary-based keys.

### tasks_backend

- `tasks_backend.config_path` points to the active backend config file.

### execution

- `execution.profile`
- `execution.reasoning_effort`
- `execution.tool_budget`
- `execution.stop_conditions`
- `execution.handoff_conditions`
- `execution.unsafe_actions_requiring_explicit_user_ok`

## Examples

Set primary tags that require Verify Steps:

```bash
agentplane config set tasks.verify.require_steps_for_primary '["code","data","ops"]'
```

Set primary tags that require recorded verification before finish:

```bash
agentplane config set tasks.verify.require_verification_for_primary '["code","data","ops"]'
```

Switch to branch workflow:

```bash
agentplane config set workflow_mode branch_pr
```

Enable stricter force approvals:

```bash
agentplane config set agents.approvals.require_force true
```
