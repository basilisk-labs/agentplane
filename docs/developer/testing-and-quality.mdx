---
title: "Testing and quality"
description: "How to run tests, lint, typecheck, and enforce quality gates."
---

## Local checks

From repo root:

```bash
bun install
bun run format:check
bun run lint
bun run typecheck
bun run test:fast
```

For a full run (including slower CLI integration tests):

```bash
bun run test:full
```

To run only the CLI integration tests (without the slower smoke test):

```bash
bun run test:cli
```

To run the critical pre-push suite (fast, real git, separate-process CLI e2e checks):

```bash
bun run test:critical
```

To run the faster CLI unit-ish suites (core + recipes):

```bash
bun run test:cli:unit
```

To run specific CLI suites:

```bash
bun run test:cli:core
bun run test:cli:recipes
bun run test:cli:scenario
```

To run the CLI smoke test (slowest end-to-end path):

```bash
bun run test:cli:smoke
```

To run the slow CLI suites together (scenario + smoke):

```bash
bun run test:cli:slow
```

To run package-scoped unit tests:

```bash
bun run test:agentplane
bun run test:core
bun run test:recipes
bun run test:testkit
```

## Package-specific checks

```bash
bun run --filter=agentplane build
bun run test:fast
```

## CI scoping (internal)

The repo includes a helper script that runs checks on a single scope:

```bash
node scripts/ci-scope.mjs --scope agentplane
```

Scopes: `agentplane`, `core`, `recipes`, `spec`, `testkit`.

This is intended for CI/local optimization; it is not part of the public CLI.

## Git hooks

Git hooks are a required quality gate for this repo. Do not bypass them.

```bash
agentplane hooks install
agentplane hooks uninstall
```

By default, hooks run fast tests on pre-commit and the critical + full suites on pre-push. If a hook fails, fix the issue instead of skipping the hook.

## CI

On PRs and on pushes to `main`, CI runs:

- `bun run lint`
- `bun run test:fast`
- `bun run test:critical`

## Coverage and parity tests

- CLI tests live in `packages/agentplane/src/run-cli.core.test.ts`, `packages/agentplane/src/run-cli.recipes.test.ts`, and `packages/agentplane/src/run-cli.scenario.test.ts`.
- Backend tests live in `packages/agentplane/src/task-backend.test.ts`.
