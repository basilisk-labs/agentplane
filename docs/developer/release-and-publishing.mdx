---
title: "Release and publishing"
description: "How to version and publish the CLI and core packages."
---

## Versioning

Use semantic versioning. The CLI depends on `@agentplaneorg/core`, so bump versions together when APIs change.
The CLI `--version` output is sourced from `packages/agentplane/package.json`.

## Release notes (required)

Every release **must** include English, human‑readable notes in `docs/releases/vX.Y.Z.md`.

- The file must exist in the commit **before** the tag is created.
- Use `docs/releases/TEMPLATE.md` as the starting point.
- Keep the bullets outcome‑focused and user‑readable (not just raw commit lists).

The publish workflow fails if release notes are missing or empty.

## Standard release workflow (recommended)

Agent Plane supports an agent-assisted release flow that separates:

- generating a structured changes list and target version (plan)
- writing human release notes (DOCS)
- applying the version bump plus tagging for publish (apply)

### 1) Generate a release plan

Patch bumps are the default. Minor/major bumps require explicit approval via `--yes`.

```bash
agentplane release plan
```

This writes a plan directory under `.agentplane/.release/plan/<runId>/` with:

- the computed `nextTag` and bump kind
- a machine-readable changes list for release notes authoring

### 2) Write release notes (DOCS)

Create `docs/releases/vX.Y.Z.md` based on the plan output.

### 3) Apply the release (commit plus tag)

```bash
agentplane release apply
```

This command:

- validates that release notes exist and are non-empty
- bumps workspace package versions together
- creates a release commit
- creates the git tag `vX.Y.Z`

To push the release commit and tag:

```bash
agentplane release apply --push --yes
```

Notes:

- Patch releases can be applied without `--yes`.
- Pushing requires `--yes` (safety gate).

## Trusted publishing (GitHub Actions)

To enable npm trusted publishing, configure the npm package to trust the GitHub Actions workflow
in this repository. Create a workflow named `publish.yml` under `.github/workflows/` and register
it in the npm “Trusted Publishers” settings for each package (`@agentplaneorg/core` and `agentplane`).

Use GitHub-hosted runners and allow the workflow to request an OIDC token (`id-token: write`).
The workflow should publish from `packages/core` first, then `packages/agentplane`.
Trusted publishing requires npm 11.5.1 or newer in the workflow runtime.

If you publish under the `@agentplaneorg` scope, make sure the `agentplaneorg` npm organization exists
and you have owner rights before publishing.

## Release trigger

Publishing is triggered automatically for tags that match `v*`. Use annotated or lightweight tags — both
are supported. The workflow also supports manual runs via `workflow_dispatch` if needed.

On each release tag, the workflow enforces:

- `docs/releases/vX.Y.Z.md` exists and follows the template.
- `packages/agentplane/package.json` and `packages/core/package.json` versions match the tag.

After publishing, the workflow creates a GitHub Release using `docs/releases/vX.Y.Z.md` as the body.

## Local guardrail

The `pre-push` hook checks that release notes exist when pushing a release tag.

## Global install check

```bash
npm i -g agentplane@latest
agentplane --help
```

## Notes

- Ensure `dist/` is up to date before publishing (monorepo development requires building packages before commits that affect published artifacts).
- Keep metadata in `package.json` accurate (description, keywords, repository, etc.).

## Emergency manual publish (discouraged)

If trusted publishing is unavailable, you can publish manually, but treat this as a controlled, explicit action with extra verification:

1. Build and pack:

   ```bash
   bun run release:check
   ```

2. Publish order:

   ```bash
   cd packages/core && npm publish --access public
   cd ../agentplane && npm publish --access public
   ```
