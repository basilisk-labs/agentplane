---
title: "Recipes development"
description: "Practical workflow for authoring and validating recipes."
---

## Authoring checklist

1. Create recipe directory with `manifest.json`.
2. Add `tools/` and `scenarios/` only when needed.
3. Keep ids stable (`recipe id`, `tool id`, `scenario id`).
4. Document required env keys in recipe README.
5. Keep outputs deterministic and machine-readable.

## Minimal local validation

1. Build archive (`.tar.gz` or `.zip`).
2. Install locally:
   - `agentplane recipes install --path <archive>`
3. Verify visibility:
   - `agentplane recipes list`
   - `agentplane scenario list`
4. Execute target scenario:
   - `agentplane scenario run <recipe:scenario>`
5. Inspect run artifacts under `.agentplane/recipes/<id>/runs/`.

## Designing scenarios

- Prefer short, composable steps.
- Keep each step focused on one tool responsibility.
- Explicitly define expected outputs and failure messages.
- Do not hide required inputs behind implicit defaults.

## Designing tools

- Declare minimal permissions in manifest.
- Keep tool side effects inside project-local directories when possible.
- Prefer stable stdout/stderr output formats for downstream automation.
- Exit non-zero on failures and include actionable error text.

## Distribution and upgrades

- Bump recipe version on each behavioral change.
- Keep backward-compatible upgrades when possible.
- Avoid removing scenario ids without migration path.

## Integration notes

- Recipe-provided agents are namespaced on install to avoid id collisions.
- Use `--on-conflict` policy explicitly when testing collision behavior.
- Validate both local archive installs and remote index installs before release.
