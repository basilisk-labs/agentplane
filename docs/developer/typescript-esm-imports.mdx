---
title: "TypeScript ESM imports"
description: "Why TypeScript source imports local modules with .js specifiers in this repository."
---

Agentplane compiles TypeScript to Node.js ESM. Source files intentionally use `.js` specifiers for local imports:

```ts
import { runCli } from "./run-cli.js";
```

This is expected behavior, not a mixed JS/TS source tree.

## Runtime rule (Node ESM)

Node resolves ESM module specifiers at runtime and does not resolve `.ts` by default.
Compiled output is `.js`, so runtime import specifiers must point to `.js`.

## TypeScript rule (NodeNext / ESM)

With Node ESM resolution mode, TypeScript maps `.js` specifiers back to `.ts` sources for type-checking.
That keeps both compile-time and runtime paths valid.

## Why editors may warn

Some editors show false missing-file warnings if they are not using the repository TypeScript resolver settings.

If you see warnings:

- verify editor uses project `tsconfig.json`
- verify TypeScript language server is active
- avoid alternate resolvers that do not follow NodeNext behavior

Repository checks are the source of truth:

- `bun run typecheck`
- `bun run lint`
- `bun run test:full`

If these pass, `.js` specifiers are configured correctly.
