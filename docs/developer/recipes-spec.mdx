---
title: "Recipes specification"
description: "Contract for recipe archives, manifests, and CLI behavior."
---

Recipes are optional extensions. Core workflow must remain usable with zero installed recipes.

## What a recipe contains

A recipe archive (`.zip` or `.tar.gz`) must include `manifest.json` at archive root or in a single top-level directory.

Optional directories:

- `tools/`
- `scenarios/`
- `assets/`
- `agents/`
- `README.md`

## Manifest contract

Manifest is validated against the recipe manifest schema in runtime code.

Minimum required fields:

- `schema_version` (`"1"`)
- `id`
- `version`
- `name`
- `summary`
- `description`

Optional fields include `tags`, `tools`, `scenarios`, and `agents`.

## CLI surface

Recipe commands:

- `agentplane recipes list`
- `agentplane recipes info <id>`
- `agentplane recipes explain <id>`
- `agentplane recipes install ...`
- `agentplane recipes remove <id>`
- `agentplane recipes list-remote`
- `agentplane recipes cache prune`

Scenario commands:

- `agentplane scenario list`
- `agentplane scenario info <recipe:scenario>`
- `agentplane scenario run <recipe:scenario>`

## Install sources

Install supports three source modes:

- `--name <id>` from remote index
- `--path <archive>` from local file
- `--url <archive-url>` from direct URL

Conflict handling for recipe-provided agents:

- `--on-conflict fail`
- `--on-conflict rename`
- `--on-conflict overwrite`

## Runtime storage

Global recipe metadata and cache:

- `~/.agentplane/recipes.json`
- `~/.agentplane/recipes/<id>/<version>/...`
- `~/.agentplane/recipes-index.json`

Project-local runtime artifacts:

- `.agentplane/recipes/<id>/runs/...`
- `.agentplane/recipes-cache/`

`AGENTPLANE_HOME` can override the global storage root.

## Scenario execution contract

`scenario run` resolves a scenario definition, then executes declared steps in order.
Each step references a tool id from manifest.

Current runtime support:

- tool runtime `node` or `bash`
- per-step logs in run artifact folder
- report metadata (`meta.json`, `report.json`)

## Security model

Recipe permission declarations are explicit and visible, but they are not a full sandbox.
Treat recipes as executable code and review source and manifest before install.

## Compatibility guidance

- Keep manifest fields backward-compatible.
- Additive fields are preferred over breaking schema changes.
- Avoid environment-specific assumptions in scenarios.
- Document required env keys and expected outputs in recipe README.
