---
title: "Troubleshooting by symptom"
description: "Common problems and how to fix them quickly."
---

## `agentplane` commands fail with E_USAGE

**Symptom:** CLI prints `E_USAGE` or "Usage: ..." errors.

**Fix:**

- Run `agentplane --help` to confirm the correct syntax.
- Check whether a subcommand is missing required flags.
- For machine-readable output, use `--json-errors` before the command, for example:
  - `agentplane --json-errors task show 202602120734-3M598S`

## Task doc changes rejected

**Symptom:** Guardrails complain about missing doc metadata or manual edits.

**Fix:**

- Use `agentplane task doc set <task-id>` instead of editing README by hand.
- Ensure required sections exist (Summary, Scope, Risks, Verify Steps, Rollback Plan).

## `agentplane task show --compact` fails

**Symptom:** CLI prints `Unknown option: --compact`.

**Fix:**

- `--compact` is supported by `help`, not by all commands.
- Use:
  - `agentplane task show <task-id>`
  - `agentplane help task show --compact`

## Finish fails due to readiness

**Symptom:** `agentplane finish` complains about missing dependencies.

**Fix:**

- Use `agentplane task show <task-id>` to see dependencies.
- Finish dependencies first or use `--force` if you have explicit approval.

## `agentplane verify` fails with E_USAGE

**Symptom:** `agentplane verify` prints an `E_USAGE` error.

**Fix:**

- `agentplane verify` is record-only and requires an explicit outcome and metadata, for example:
  - `agentplane verify <task-id> --ok --by REVIEWER --note "Looks good"`
  - `agentplane verify <task-id> --rework --by REVIEWER --note "Needs changes" --details "Missing tests"`
- Use `agentplane help verify --compact` to see the required flags.

## `pr check` / `integrate` fails due to missing `verify.log`

**Symptom:** `agentplane pr check` or `agentplane integrate` reports a missing `.agentplane/tasks/<task-id>/pr/verify.log`.

**Fix:**

- Ensure PR artifacts exist: run `agentplane pr open <task-id> ...` (creates `pr/verify.log` as an empty file).
- If you want to execute declared verification commands in `branch_pr`, run `agentplane integrate <task-id> --run-verify` (appends command output to `pr/verify.log`).

## Branch/worktree errors

**Symptom:** branch_pr operations fail or worktree paths are rejected.

**Fix:**

- Ensure `workflow_mode` is `branch_pr`.
- In branch_pr, use `agentplane work start <task-id> ... --worktree` to create a valid worktree.
- Check that worktrees live under `.agentplane/worktrees`.

## `config show` or `task list` fails with config validation error

**Symptom:** command fails early with schema/type error (for example, invalid `base_branch` type in config).

**Fix:**

- Open `.agentplane/config.json` and correct invalid fields.
- Validate against `packages/spec/schemas/config.schema.json` in this repository.
- If this is a fresh install and config is heavily drifted, re-run `agentplane init --yes` and re-apply minimal overrides.

## Publish workflow fails with core dependency version mismatch

**Symptom:** publish fails with a message like `@agentplaneorg/core=... does not match required release version`.

**Fix:**

- Run `bun run release:parity` locally before tagging/publishing.
- If parity fails, re-run `agentplane release apply` to regenerate release changes from a fresh plan.
- Confirm all three values match: `packages/core version`, `packages/agentplane version`, and `packages/agentplane -> dependencies["@agentplaneorg/core"]`.

## Recipe fails due to missing inputs

**Symptom:** Recipe output shows "Pending Actions".

**Fix:**

- Provide the missing fields in the recipe inputs form or JSON.
- Re-run the scenario.

## Recipe blocked by safety rules

**Symptom:** Tool execution or file writes are denied.

**Fix:**

- Ensure the manifest allowlists the files you need to read/write.
- Ensure network access is allowed in the manifest if required.

## `agentplane doctor` reports failures on a normal install

**Symptom:** doctor shows failed checks in a repository that does not contain framework source files.

**Fix:**

- Run doctor from the repository root that was initialized with `agentplane init`.
- Doctor validates normal installation invariants by default.
- If you are developing the framework itself, run doctor in that repository and keep generated/task artifacts in ignored paths.

## Sync fails for remote backend

**Symptom:** `agentplane backend sync ...` errors or reports network failures.

**Fix:**

- For redmine, configure secrets in `.env` (`REDMINE_URL`, `REDMINE_API_KEY`) and keep backend JSON non-secret.
- Retry with `--direction pull` to refresh local cache, for example:
  - `agentplane backend sync redmine --direction pull`
- Check custom field env mappings if using Redmine.
