---
title: "Recipes Specification (v1)"
description: "The v1 contract for installable recipes: layout, manifest fields, and CLI behavior."
---

Recipes are **optional, content-first extensions** for `agentplane` projects. The core engine must work with zero installed recipes.

This document defines:

- Recipe archive layout (what gets installed)
- `manifest.json` contract (fields, semantics)
- `agentplane recipe …` CLI surface (minimum v1)

## 1) Terminology

- **Recipe**: a versioned bundle of agents, tools, scenarios, and assets.
- **Installed recipe**: extracted under `.agentplane/recipes/<id>/<version>/`.
- **Official catalog**: a remote `index.json` (v1: GitHub Releases-based) fetched only by explicit commands.

## 2) Built-in recipes and catalogs

Recipes are opt-in. The CLI does not auto-install anything.

- **Bundled catalog**: compiled into the CLI at `packages/agentplane/src/bundled-recipes.ts`.
  - In this repo it is empty (as of **January 30, 2026**), so there are no built-in recipes.
- **Official catalog**: lives in the `agentplane-recipes` repository (`index.json`).
  - Use `agentplane recipe list-remote` and `agentplane recipe install <id>` to discover/install.
  - The catalog can change over time; always check the remote index for the current list.

Current official recipes (January 30, 2026):

- `viewer` — task artifacts viewer
- `redmine` — Redmine backend installer
- `github-sync` — GitHub Issues/Projects sync workflow installer
- `dokploy` — Dokploy API tooling

## 3) Archive format and layout

Recipe archives MAY be `.zip` or `.tar.gz`.

At minimum, an archive contains `manifest.json` at the root. Optional folders:

```
manifest.json
agents/        # optional: agent JSON profiles
tools/         # optional: executable tools (node or bash in v1)
scenarios/     # optional: scenario definitions
assets/        # optional: static files (html/templates/etc.)
README.md      # optional: human docs
```

### 3.1 Scenario definitions (v1)

Scenario files live under `scenarios/*.json` and are validated on install. Minimal fields:

- `schema_version: "1"`
- `id`: stable id (referenced as `<recipe-id>:<scenario-id>`)
- `goal`: what the scenario accomplishes
- `inputs`: inputs required (object/array)
- `outputs`: outputs produced (object/array)
- `steps`: ordered steps (array)

Optional fields: `summary`, `description`.

Execution (v1):

- `agentplane scenario run <recipe-id>:<scenario-id>` executes tools in order.
- Logs and artifacts are written under `.agentplane/recipes/<recipe-id>/runs/...`.

## 4) `manifest.json` schema (v1)

The `manifest.json` file must validate against `schemas/recipe-manifest.schema.json`.

High-level rules:

- `id` is stable and lowercase (recommended: `viewer`, `redmine`, `qa-pack`).
- `version` is SemVer.
- `summary` is short (used in “list” output and `.agentplane/RECIPES.md` index).
- `description` can be longer and is shown by `agentplane recipe info <id>`.

### 4.1 `schema_version`

v1 uses `schema_version: "1"` for the recipe manifest.

## 5) Install and lockfile

Installing a recipe creates/updates:

- `.agentplane/recipes/<id>/<version>/...` (the extracted content)
- `.agentplane/recipes.lock.json` (installed set, pinned versions, checksums)
- `.agentplane/RECIPES.md` (a context-minimized index: `id` + `summary` + “what it solves”)

Recommended `recipes.lock.json` fields (v1):

- `schema_version: 1`
- `recipes[]`: `{ id, version, sha256, source }`

## 6) CLI surface (minimum v1)

Commands are namespaced under `agentplane recipe`:

- `agentplane recipe list` — list locally installed recipes (id, version, summary).
- `agentplane recipe info <id>` — show detailed information from the manifest.
- `agentplane recipe install <url|id|path>` — install from:
  - local path (offline)
  - URL (explicit-network)
  - catalog id (explicit-network)
  - `--on-conflict <fail|rename|overwrite>` controls how agent ID collisions are handled
- Agents installed from recipes are namespaced as `<recipe-id>__<agent-id>` in `.agentplane/agents`.
- `agentplane recipe remove <id>` — uninstall.
- `agentplane recipe list-remote` — list recipes from the remote catalog cache (explicit-network; cached).

Optional but recommended in v1:

- `agentplane recipe pin <id>@<version>` (or lockfile-only “pin” semantics)
- `agentplane recipe refresh` (refresh remote catalog cache)

## 7) How recipes run (execution model)

At a high level:

1. **Install**: `agentplane recipe install <path|url|id>` extracts the archive into
   `.agentplane/recipes/<id>/<version>/`, writes `recipes.lock.json`, and rebuilds the
   local recipes index.
2. **Inspect**: `agentplane scenario list` and `agentplane scenario info <recipe:scenario>`
   enumerate the installed scenarios and tools.
3. **Run**: `agentplane scenario run <recipe:scenario>` executes the scenario steps in order.
   Each run writes artifacts to `.agentplane/recipes/<recipe-id>/runs/<timestamp>-<scenario>/`.

Environment handling (v1):

- Tools inherit the current process environment.
- `.env` is **not** auto-loaded for recipe execution today. If your tools depend on values from
  `.env`, export them first (e.g., `set -a; source .env; set +a`) before running a scenario.

## 8) Permissions (v1)

v1 does not sandbox recipe tools. Instead:

- tool permissions MUST be declared in the manifest (informational)
- the CLI MUST warn before executing a tool that declares network or filesystem write access

Sandboxing is deferred to v2.

## 9) Developer guide: adding new recipes

Source-of-truth for official recipes lives in the `agentplane-recipes` repository.

1. **Create the recipe folder**
   - `agentplane-recipes/recipes/<id>/manifest.json`
   - Optional: `tools/`, `scenarios/`, `assets/`, `agents/`, `README.md`
2. **Define tools and scenarios**
   - Tools should be executable scripts (v1: `node` or `bash`).
   - Each scenario is a JSON file in `scenarios/` referencing tools by `id`.
3. **Validate locally**
   - Build a local archive:
     - `tar -czf /tmp/<id>-<version>.tar.gz -C recipes <id>`
   - Install and run from a test repo:
     - `agentplane recipe install /tmp/<id>-<version>.tar.gz`
     - `agentplane scenario list`
     - `agentplane scenario run <id>:<scenario>`
4. **Build release artifacts**
   - From `agentplane-recipes` root:
     - `bun scripts/build-release.ts --tag vX.Y.Z`
   - This generates `dist/*.tar.gz` and updates `index.json` + `dist/index.json` with SHA256s.
5. **Publish**
   - Create a GitHub release in `basilisk-labs/agentplane-recipes` with tag `vX.Y.Z`.
   - Upload the `dist/*.tar.gz` and `dist/index.json` assets.
6. **Consume**
   - In `agentplane`, update the submodule pointer if you track recipes as a submodule.
   - Refresh the remote index in projects: `agentplane recipe list-remote --refresh`.
