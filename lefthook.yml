pre-commit:
  commands:
    format:
      run: bun run format:check
    lint:
      run: bun run lint
    test-fast:
      run: bun run test:fast
commit-msg:
  commands:
    commit-subject:
      # Enforce the emoji-based commit subject policy for all commits.
      # - Task commits must be performed via agentplane (sets AGENTPLANE_TASK_ID).
      # - Non-task commits must use: `âœ¨ <scope>: <summary>` (explicit `DEV` suffix is also allowed).
      run: |
        set -euo pipefail
        msg="$(git rev-parse --git-path COMMIT_EDITMSG)"
        node packages/agentplane/bin/agentplane.js hooks run commit-msg -- "$msg"
pre-push:
  commands:
    release-notes:
      run: node scripts/check-release-notes.mjs
      use_stdin: true
    test-critical:
      run: bun run test:critical
    test-full:
      run: bun run test:full
